(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profileIndex"],{"07ac":function(e,t,r){var a=r("23e7"),n=r("6f53").values;a({target:"Object",stat:!0},{values:function(e){return n(e)}})},1708:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{class:["btn btn-sm action-btn",e.following?"btn-secondary":"btn-outline-secondary"],attrs:{disabled:e.isLoading},on:{click:e.onFollowButtonClick}},[r("i",{class:[e.following?"ion-minus-round":"ion-plus-round"]}),e._v(" "+e._s(e.followButtonTitle)+" ")])},n=[],i=(r("96cf"),r("1da1")),s=r("d4ec"),o=r("bee2"),c=r("99de"),u=r("7e84"),l=r("262e"),f=r("9ab4"),d=r("60a3"),h=r("7eab"),b=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.isLoading=!1,e}return Object(l["a"])(t,e),Object(o["a"])(t,[{key:"onFollowButtonClick",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLoading=!0,e.prev=1,!this.following){e.next=7;break}return e.next=5,h["a"].unFollow(this.username);case 5:e.next=9;break;case 7:return e.next=9,h["a"].follow(this.username);case 9:return e.prev=9,this.isLoading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,,9,12]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"followButtonTitle",get:function(){return this.following?"Unfollow ".concat(this.username):"Follow ".concat(this.username)}}]),t}(d["d"]);Object(f["a"])([Object(d["c"])({required:!0})],b.prototype,"following",void 0),Object(f["a"])([Object(d["c"])({required:!0})],b.prototype,"username",void 0),b=Object(f["a"])([d["a"]],b);var p=b,v=p,m=r("2877"),g=Object(m["a"])(v,a,n,!1,null,null,null);t["a"]=g.exports},"52f6":function(e,t,r){"use strict";r.r(t);var a,n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isLoading||!e.profile?r("common-loader"):r("div",{staticClass:"profile-page"},[r("div",{staticClass:"user-info"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12 col-md-10 offset-md-1"},[r("img",{staticClass:"user-img",attrs:{src:e.profile.image}}),r("h4",[e._v(e._s(e.profile.username))]),r("p",[e._v(" "+e._s(e.profile.bio)+" ")]),e.isMyProfile?r("router-link",{staticClass:"btn action-btn btn-sm btn-outline-secondary",attrs:{to:{name:e.$routesNames.profileSettings}}},[r("i",{staticClass:"ion-gear-a"}),e._v(" Edit Profile Settings ")]):r("profile-follow-button",{attrs:{username:e.author.username,following:e.author.following}})],1)])])]),r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12 col-md-10 offset-md-1"},[r("common-feed",{attrs:{tabs:e.tabs,"active-tab-id":e.activeTabId,"is-loading":e.isLoading,feed:e.activeFeed,"items-per-page":e.itemsPerPage,"current-page":e.currentPage},on:{"page-changed":e.onPageChanged,"tab-changed":e.onTabChanged}})],1)])])])},i=[],s=(r("45fc"),r("07ac"),r("5530")),o=(r("96cf"),r("1da1")),c=r("d4ec"),u=r("bee2"),l=r("99de"),f=r("7e84"),d=r("262e"),h=r("9ab4"),b=r("60a3"),p=r("f63d"),v=r("bccb"),m=r("1708"),g=r("b77b"),w=r("a080"),k=r("7eab"),y=r("7f1d");(function(e){e["Favorites"]="favorites",e["My"]="my"})(a||(a={})),b["a"].registerHooks(["beforeRouteEnter","beforeRouteUpdate"]);var j=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(l["a"])(this,Object(f["a"])(t).apply(this,arguments)),e._profile={username:"",bio:"",image:"",following:!1},e.isLoading=!1,e.isFollowActionInProgress=!1,e.currentPage=g["b"],e.itemsPerPage=g["a"],e.activeTabId=a.My,e.activeFeed={articles:[],articlesCount:0},e.activeTag=null,e}return Object(d["a"])(t,e),Object(u["a"])(t,[{key:"beforeRouteEnter",value:function(e,t,r){r((function(a){a.onRouteUpdate(e,t,r)}))}},{key:"beforeRouteUpdate",value:function(e,t,r){this.onRouteUpdate(e,t,r)}},{key:"onRouteUpdate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,n){var i,s,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n(),this.isLoading=!0,e.prev=2,c=null===t||void 0===t||null===(i=t.params)||void 0===i?void 0:i.username,u=null===r||void 0===r||null===(s=r.params)||void 0===s?void 0:s.username,c){e.next=8;break}return this.$router.push({name:this.$routesNames.home}),e.abrupt("return");case 8:if(c===u){e.next=12;break}return e.next=11,k["a"].get(c);case 11:this._profile=e.sent;case 12:return l=null===t||void 0===t||null===(o=t.params)||void 0===o?void 0:o.tabId,l&&Object.values(a).some((function(e){return e===l}))?this.activeTabId=l:this.activeTabId=a.My,e.next=16,this.fetchFeed();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](2),this.$router.push({name:this.$routesNames.home});case 21:return e.prev=21,this.isLoading=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[2,18,21,24]])})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"onTabChanged",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===a.My||e.t0===a.Favorites?3:9;break;case 3:return this.activeTabId=t,this.currentPage=g["b"],this.$router.push({params:{username:this.profile.username,tabId:this.activeTabId}}),e.next=8,this.fetchFeed();case 8:return e.abrupt("break",10);case 9:throw new Error("Unexpected tabId: ".concat(t));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onPageChanged",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.currentPage=t,e.next=3,this.fetchFeed();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetchFeed",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isLoading=!0,e.prev=1,t={limit:this.itemsPerPage,offset:(this.currentPage-1)*this.itemsPerPage},e.t0=this.activeTabId,e.next=e.t0===a.Favorites?6:e.t0===a.My?10:14;break;case 6:return e.next=8,w["a"].getList(Object(s["a"])({favorited:this.profile.username},t));case 8:return this.activeFeed=e.sent,e.abrupt("break",15);case 10:return e.next=12,w["a"].getList(Object(s["a"])({author:this.profile.username},t));case 12:return this.activeFeed=e.sent,e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:return e.prev=15,this.isLoading=!1,window.scrollTo(0,0),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[1,,15,19]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"profile",get:function(){var e;return k["a"].profilesCache[null===(e=this._profile)||void 0===e?void 0:e.username]||this._profile}},{key:"tabs",get:function(){var e=this.isMyProfile?"My Articles":"".concat(this.profile.username,"'s Articles");return[{id:a.My,title:e},{id:a.Favorites,title:"Favorited Articles"}]}},{key:"isMyProfile",get:function(){var e;return this.profile.username===(null===(e=y["a"].currentUser)||void 0===e?void 0:e.username)}}]),t}(b["d"]);j=Object(h["a"])([Object(b["a"])({components:{CommonLoader:v["a"],CommonFeed:p["a"],ProfileFollowButton:m["a"]}})],j);var O=j,x=O,C=r("2877"),P=Object(C["a"])(x,n,i,!1,null,null,null);t["default"]=P.exports}}]);
//# sourceMappingURL=profileIndex.9024f2fd.js.map