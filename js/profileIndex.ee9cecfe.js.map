{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.object.values.js","webpack:///./src/components/ProfileFollowButton.vue?089e","webpack:///./src/components/ProfileFollowButton.vue","webpack:///./src/components/ProfileFollowButton.vue?4d5d","webpack:///./src/components/ProfileFollowButton.vue?e617","webpack:///./src/views/ProfileIndex.vue?4372","webpack:///./src/views/ProfileIndex.vue","webpack:///./src/views/ProfileIndex.vue?bd89","webpack:///./src/views/ProfileIndex.vue?d4de"],"names":["$","$values","values","target","stat","O","render","_vm","this","_h","$createElement","_c","_self","class","following","attrs","isLoading","on","onFollowButtonClick","_v","_s","followButtonTitle","staticRenderFns","Profile","unFollow","username","follow","required","component","FeedType","profile","staticClass","image","bio","name","$routesNames","profileSettings","author","tabs","activeTabId","activeFeed","itemsPerPage","currentPage","onPageChanged","onTabChanged","registerHooks","_profile","isFollowActionInProgress","My","articles","articlesCount","activeTag","to","from","next","vm","onRouteUpdate","toUserName","params","fromUserName","$router","push","home","get","tabId","Object","some","v","fetchFeed","Favorites","Error","page","pagination","limit","offset","Article","getList","favorited","window","scrollTo","profilesCache","myTitle","isMyProfile","id","title","User","currentUser","components","CommonLoader","CommonFeed","ProfileFollowButton"],"mappings":"mGAAA,IAAIA,EAAI,EAAQ,QACZC,EAAU,EAAQ,QAAgCC,OAItDF,EAAE,CAAEG,OAAQ,SAAUC,MAAM,GAAQ,CAClCF,OAAQ,SAAgBG,GACtB,OAAOJ,EAAQI,O,kCCPnB,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,MAAM,CAC/G,wBACAN,EAAIO,UAAY,gBAAkB,yBAClCC,MAAM,CAAC,SAAWR,EAAIS,WAAWC,GAAG,CAAC,MAAQV,EAAIW,sBAAsB,CAACP,EAAG,IAAI,CAACE,MAAM,CAACN,EAAIO,UAAY,kBAAoB,oBAAoBP,EAAIY,GAAG,IAAIZ,EAAIa,GAAGb,EAAIc,mBAAmB,QACxLC,EAAkB,G,wHCgBD,EAArB,6D,+DAIE,EAAAN,WAAY,EAJd,0OAYIR,KAAKQ,WAAY,EAZrB,UAcMR,KAAKM,UAdX,gCAegBS,EAAA,KAAQC,SAAShB,KAAKiB,UAftC,6CAgBgBF,EAAA,KAAQG,OAAOlB,KAAKiB,UAhBpC,uBAkBMjB,KAAKQ,WAAY,EAlBvB,0KAOI,OAAOR,KAAKM,UAAL,mBACSN,KAAKiB,UADd,iBAEOjB,KAAKiB,cATvB,GAAiD,QACrB,gBAAzB,eAAK,CAAEE,UAAU,K,gCACQ,gBAAzB,eAAK,CAAEA,UAAU,K,+BAFC,EAAmB,gBADvC,QACoB,WCpByX,I,YCO1YC,EAAY,eACd,EACAtB,EACAgB,GACA,EACA,KACA,KACA,MAIa,OAAAM,E,oDClBf,ICkEKC,EDlEDvB,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAIS,YAAcT,EAAIuB,QAASnB,EAAG,iBAAiBA,EAAG,MAAM,CAACoB,YAAY,gBAAgB,CAACpB,EAAG,MAAM,CAACoB,YAAY,aAAa,CAACpB,EAAG,MAAM,CAACoB,YAAY,aAAa,CAACpB,EAAG,MAAM,CAACoB,YAAY,OAAO,CAACpB,EAAG,MAAM,CAACoB,YAAY,mCAAmC,CAACpB,EAAG,MAAM,CAACoB,YAAY,WAAWhB,MAAM,CAAC,IAAMR,EAAIuB,QAAQE,SAASrB,EAAG,KAAK,CAACJ,EAAIY,GAAGZ,EAAIa,GAAGb,EAAIuB,QAAQL,aAAad,EAAG,IAAI,CAACJ,EAAIY,GAAG,IAAIZ,EAAIa,GAAGb,EAAIuB,QAAQG,KAAK,OAAQ1B,EAAe,YAAEI,EAAG,cAAc,CAACoB,YAAY,8CAA8ChB,MAAM,CAAC,GAAK,CAAEmB,KAAM3B,EAAI4B,aAAaC,mBAAoB,CAACzB,EAAG,IAAI,CAACoB,YAAY,eAAexB,EAAIY,GAAG,6BAA6BR,EAAG,wBAAwB,CAACI,MAAM,CAAC,SAAWR,EAAI8B,OAAOZ,SAAS,UAAYlB,EAAI8B,OAAOvB,cAAc,SAASH,EAAG,MAAM,CAACoB,YAAY,aAAa,CAACpB,EAAG,MAAM,CAACoB,YAAY,OAAO,CAACpB,EAAG,MAAM,CAACoB,YAAY,mCAAmC,CAACpB,EAAG,cAAc,CAACI,MAAM,CAAC,KAAOR,EAAI+B,KAAK,gBAAgB/B,EAAIgC,YAAY,aAAahC,EAAIS,UAAU,KAAOT,EAAIiC,WAAW,iBAAiBjC,EAAIkC,aAAa,eAAelC,EAAImC,aAAazB,GAAG,CAAC,eAAeV,EAAIoC,cAAc,cAAcpC,EAAIqC,iBAAiB,UAC3sCtB,EAAkB,G,mOCiEtB,SAAKO,GACH,2BACA,cAFF,CAAKA,MAAQ,KAKb,OAAUgB,cAAc,CAAC,mBAAoB,sBAS7C,IAAqB,EAArB,6D,+DACE,EAAAC,SAAqB,CAAErB,SAAU,GAAIQ,IAAK,GAAID,MAAO,GAAIlB,WAAW,GACpE,EAAAE,WAAY,EACZ,EAAA+B,0BAA2B,EAC3B,EAAAL,YAAc,OACd,EAAAD,aAAe,OAEf,EAAAF,YAAwBV,EAASmB,GACjC,EAAAR,WAA2B,CAAES,SAAU,GAAIC,cAAe,GAC1D,EAAAC,UAA2B,KAT7B,sFAmCmBC,EAAcC,EAAgBC,GAC7CA,GAAK,SAACC,GACJA,EAAGC,cAAcJ,EAAIC,EAAMC,QArCjC,wCAwCoBF,EAAcC,EAAgBC,GAC9C9C,KAAKgD,cAAcJ,EAAIC,EAAMC,KAzCjC,+FA6CIF,EACAC,EACAC,GA/CJ,oGAiDIA,IAEA9C,KAAKQ,WAAY,EAnDrB,SAqDYyC,EArDZ,OAqDyBL,QArDzB,IAqDyBA,GArDzB,UAqDyBA,EAAIM,cArD7B,aAqDyB,EAAYjC,SACzBkC,EAtDZ,OAsD2BN,QAtD3B,IAsD2BA,GAtD3B,UAsD2BA,EAAMK,cAtDjC,aAsD2B,EAAcjC,SAC9BgC,EAvDX,uBAwDQjD,KAAKoD,QAAQC,KAAK,CAAE3B,KAAM1B,KAAK2B,aAAa2B,OAxDpD,6BA2DUL,IAAeE,EA3DzB,kCA4D8BpC,EAAA,KAAQwC,IAAIN,GA5D1C,QA4DQjD,KAAKsC,SA5Db,sBA+DYkB,EA/DZ,OA+DoBZ,QA/DpB,IA+DoBA,GA/DpB,UA+DoBA,EAAIM,cA/DxB,aA+DoB,EAAYM,MACtBA,GAASC,OAAO/D,OAAO2B,GAAUqC,MAAK,SAAAC,GAAC,OAAKA,IAAiBH,KAC/DxD,KAAK+B,YAAcyB,EAEnBxD,KAAK+B,YAAcV,EAASmB,GAnEpC,UAsEYxC,KAAK4D,YAtEjB,6DAwEM5D,KAAKoD,QAAQC,KAAK,CAAE3B,KAAM1B,KAAK2B,aAAa2B,OAxElD,yBA0EMtD,KAAKQ,WAAY,EA1EvB,yOA8EqBgD,GA9ErB,sFA+EYA,EA/EZ,cAgFWnC,EAASmB,IAhFpB,OAiFWnB,EAASwC,UAjFpB,wBAkFQ7D,KAAK+B,YAAcyB,EACnBxD,KAAKkC,YAAc,OACnBlC,KAAKoD,QAAQC,KAAK,CAChBH,OAAQ,CAAEjC,SAAUjB,KAAKsB,QAAQL,SAAUuC,MAAOxD,KAAK+B,eArFjE,SAuFc/B,KAAK4D,YAvFnB,gDA2Fc,IAAIE,MAAJ,4BAA+BN,IA3F7C,0MA+FsBO,GA/FtB,wFAgGI/D,KAAKkC,YAAc6B,EAhGvB,SAiGU/D,KAAK4D,YAjGf,8RAqGI5D,KAAKQ,WAAY,EArGrB,SAuGYwD,EAA0B,CAC9BC,MAAOjE,KAAKiC,aACZiC,QAASlE,KAAKkC,YAAc,GAAKlC,KAAKiC,cAzG9C,KA4GcjC,KAAK+B,YA5GnB,cA6GaV,EAASwC,UA7GtB,SAmHaxC,EAASmB,GAnHtB,mCA8GkC2B,EAAA,KAAQC,QAAR,gBACtBC,UAAWrE,KAAKsB,QAAQL,UACrB+C,IAhHf,cA8GUhE,KAAKgC,WA9Gf,qDAoHkCmC,EAAA,KAAQC,QAAR,gBACtBvC,OAAQ7B,KAAKsB,QAAQL,UAClB+C,IAtHf,eAoHUhE,KAAKgC,WApHf,yFA6HMhC,KAAKQ,WAAY,EACjB8D,OAAOC,SAAS,EAAG,GA9HzB,kKAWa,MACT,OAAOxD,EAAA,KAAQyD,cAAR,UAAsBxE,KAAKsC,gBAA3B,aAAsB,EAAerB,WAAajB,KAAKsC,WAZlE,2BAgBI,IAAMmC,EAAUzE,KAAK0E,YACjB,cADY,UAET1E,KAAKsB,QAAQL,SAFJ,eAGhB,MAAO,CACL,CACE0D,GAAItD,EAASmB,GACboC,MAAOH,GAET,CACEE,GAAItD,EAASwC,UACbe,MAAO,yBA1Bf,kCA+BiB,MACb,OAAO5E,KAAKsB,QAAQL,YAAb,UAA0B4D,EAAA,KAAKC,mBAA/B,aAA0B,EAAkB7D,cAhCvD,GAA0C,QAArB,EAAY,gBAPhC,eAAU,CACT8D,WAAY,CACVC,eAAA,KACAC,aAAA,KACAC,sBAAA,SAGiB,WChFkX,I,YCOnY9D,EAAY,eACd,EACAtB,EACAgB,GACA,EACA,KACA,KACA,MAIa,aAAAM,E","file":"js/profileIndex.ee9cecfe.js","sourcesContent":["var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.github.io/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{class:[\n    'btn btn-sm action-btn',\n    _vm.following ? 'btn-secondary' : 'btn-outline-secondary'\n  ],attrs:{\"disabled\":_vm.isLoading},on:{\"click\":_vm.onFollowButtonClick}},[_c('i',{class:[_vm.following ? 'ion-minus-round' : 'ion-plus-round']}),_vm._v(\" \"+_vm._s(_vm.followButtonTitle)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\n\nimport Profile from \"@/store/modules/Profile\";\n\n@Component\nexport default class ProfileFollowButton extends Vue {\n  @Prop({ required: true }) following!: boolean;\n  @Prop({ required: true }) username!: string;\n\n  isLoading = false;\n\n  get followButtonTitle(): string {\n    return this.following\n      ? `Unfollow ${this.username}`\n      : `Follow ${this.username}`;\n  }\n  async onFollowButtonClick(): Promise<void> {\n    this.isLoading = true;\n    try {\n      this.following\n        ? await Profile.unFollow(this.username)\n        : await Profile.follow(this.username);\n    } finally {\n      this.isLoading = false;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileFollowButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileFollowButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ProfileFollowButton.vue?vue&type=template&id=7e5a26d6&\"\nimport script from \"./ProfileFollowButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./ProfileFollowButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isLoading || !_vm.profile)?_c('common-loader'):_c('div',{staticClass:\"profile-page\"},[_c('div',{staticClass:\"user-info\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xs-12 col-md-10 offset-md-1\"},[_c('img',{staticClass:\"user-img\",attrs:{\"src\":_vm.profile.image}}),_c('h4',[_vm._v(_vm._s(_vm.profile.username))]),_c('p',[_vm._v(\" \"+_vm._s(_vm.profile.bio)+\" \")]),(_vm.isMyProfile)?_c('router-link',{staticClass:\"btn action-btn btn-sm btn-outline-secondary\",attrs:{\"to\":{ name: _vm.$routesNames.profileSettings }}},[_c('i',{staticClass:\"ion-gear-a\"}),_vm._v(\" Edit Profile Settings \")]):_c('profile-follow-button',{attrs:{\"username\":_vm.author.username,\"following\":_vm.author.following}})],1)])])]),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xs-12 col-md-10 offset-md-1\"},[_c('common-feed',{attrs:{\"tabs\":_vm.tabs,\"active-tab-id\":_vm.activeTabId,\"is-loading\":_vm.isLoading,\"feed\":_vm.activeFeed,\"items-per-page\":_vm.itemsPerPage,\"current-page\":_vm.currentPage},on:{\"page-changed\":_vm.onPageChanged,\"tab-changed\":_vm.onTabChanged}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\nimport CommonFeed, { IFeedTab } from \"@/components/CommonFeed.vue\";\nimport CommonLoader from \"@/components/CommonLoader.vue\";\nimport ProfileFollowButton from \"@/components/ProfileFollowButton.vue\";\nimport { Location } from \"@/router\";\nimport IPagination, {\n  DEFAULT_ITEMS_PER_PAGE,\n  DEFAULT_START_PAGE\n} from \"@/services/common/IPagination\";\nimport { IArticleList, IProfile } from \"@/services/realWorldApi/models\";\nimport Article from \"@/store/modules/Article\";\nimport Profile from \"@/store/modules/Profile\";\nimport User from \"@/store/modules/User\";\n\nenum FeedType {\n  Favorites = \"favorites\",\n  My = \"my\"\n}\n\nComponent.registerHooks([\"beforeRouteEnter\", \"beforeRouteUpdate\"]);\n\n@Component({\n  components: {\n    CommonLoader,\n    CommonFeed,\n    ProfileFollowButton\n  }\n})\nexport default class ProfileIndex extends Vue {\n  _profile: IProfile = { username: \"\", bio: \"\", image: \"\", following: false };\n  isLoading = false;\n  isFollowActionInProgress = false;\n  currentPage = DEFAULT_START_PAGE;\n  itemsPerPage = DEFAULT_ITEMS_PER_PAGE;\n\n  activeTabId: FeedType = FeedType.My;\n  activeFeed: IArticleList = { articles: [], articlesCount: 0 };\n  activeTag: string | null = null;\n\n  get profile(): IProfile {\n    return Profile.profilesCache[this._profile?.username] || this._profile;\n  }\n\n  get tabs(): IFeedTab[] {\n    const myTitle = this.isMyProfile\n      ? \"My Articles\"\n      : `${this.profile.username}'s Articles`;\n    return [\n      {\n        id: FeedType.My,\n        title: myTitle\n      },\n      {\n        id: FeedType.Favorites,\n        title: \"Favorited Articles\"\n      }\n    ];\n  }\n\n  get isMyProfile(): boolean {\n    return this.profile.username === User.currentUser?.username;\n  }\n\n  beforeRouteEnter(to: Location, from: Location, next: Function): void {\n    next((vm: ProfileIndex) => {\n      vm.onRouteUpdate(to, from, next);\n    });\n  }\n  beforeRouteUpdate(to: Location, from: Location, next: Function): void {\n    this.onRouteUpdate(to, from, next);\n  }\n\n  async onRouteUpdate(\n    to: Location,\n    from: Location,\n    next: Function\n  ): Promise<void> {\n    next();\n\n    this.isLoading = true;\n    try {\n      const toUserName = to?.params?.username;\n      const fromUserName = from?.params?.username;\n      if (!toUserName) {\n        this.$router.push({ name: this.$routesNames.home });\n        return;\n      }\n      if (toUserName !== fromUserName) {\n        this._profile = await Profile.get(toUserName);\n      }\n\n      const tabId = to?.params?.tabId;\n      if (tabId && Object.values(FeedType).some(v => (v as string) === tabId)) {\n        this.activeTabId = tabId as FeedType;\n      } else {\n        this.activeTabId = FeedType.My;\n      }\n\n      await this.fetchFeed();\n    } catch (e) {\n      this.$router.push({ name: this.$routesNames.home });\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  async onTabChanged(tabId: FeedType): Promise<void> {\n    switch (tabId) {\n      case FeedType.My:\n      case FeedType.Favorites:\n        this.activeTabId = tabId;\n        this.currentPage = DEFAULT_START_PAGE;\n        this.$router.push({\n          params: { username: this.profile.username, tabId: this.activeTabId }\n        });\n        await this.fetchFeed();\n        break;\n\n      default:\n        throw new Error(`Unexpected tabId: ${tabId}`);\n    }\n  }\n\n  async onPageChanged(page: number): Promise<void> {\n    this.currentPage = page;\n    await this.fetchFeed();\n  }\n\n  async fetchFeed(): Promise<void> {\n    this.isLoading = true;\n    try {\n      const pagination: IPagination = {\n        limit: this.itemsPerPage,\n        offset: (this.currentPage - 1) * this.itemsPerPage\n      };\n\n      switch (this.activeTabId) {\n        case FeedType.Favorites:\n          this.activeFeed = await Article.getList({\n            favorited: this.profile.username,\n            ...pagination\n          });\n          break;\n        case FeedType.My:\n          this.activeFeed = await Article.getList({\n            author: this.profile.username,\n            ...pagination\n          });\n          break;\n        default:\n          break;\n      }\n    } finally {\n      this.isLoading = false;\n      window.scrollTo(0, 0);\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileIndex.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProfileIndex.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ProfileIndex.vue?vue&type=template&id=2edbcf4f&\"\nimport script from \"./ProfileIndex.vue?vue&type=script&lang=ts&\"\nexport * from \"./ProfileIndex.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}